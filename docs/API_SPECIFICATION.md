# API ä»•æ§˜æ›¸

## 1. API æ¦‚è¦

### 1.1 ãƒ™ãƒ¼ã‚¹æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ™ãƒ¼ã‚¹ URL** | `http://localhost:3001` (é–‹ç™ºç’°å¢ƒ) |
| **èªè¨¼æ–¹å¼** | ãªã—ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰ã€å°†æ¥çš„ã«JWTäºˆå®š |
| **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å½¢å¼** | `application/json`, `multipart/form-data` |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒª** | HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ + JSON ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
| **ãƒãƒ¼ã‚¸ãƒ§ãƒ³** | v1ï¼ˆç¾åœ¨ï¼‰|
| **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯** | Node.js + Express.js |

### 1.2 å¯¾å¿œç’°å¢ƒ

| ç’°å¢ƒ | çŠ¶æ…‹ | å‚™è€ƒ |
|------|------|------|
| **é–‹ç™ºç’°å¢ƒ** | å®Ÿè£…æ¸ˆã¿ | ãƒ­ãƒ¼ã‚«ãƒ« Node.js ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ3001ï¼‰|
| **ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°** | æœªå®Ÿè£… | å°†æ¥çš„ã« Heroku ç­‰ã§äºˆå®š |
| **æœ¬ç•ªç’°å¢ƒ** | è¨ˆç”»ä¸­ | Firebase production ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |

## 2. èªè¨¼ãƒ»èªå¯

### 2.1 èªè¨¼ãƒ˜ãƒƒãƒ€

```
Authorization: Bearer <idToken>

<idToken>: Firebase Authentication ãŒç™ºè¡Œã™ã‚‹ JWT ãƒˆãƒ¼ã‚¯ãƒ³

ãƒˆãƒ¼ã‚¯ãƒ³ä¾‹:
Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vIiwic3ViIjoiYWJjMTIzIn0.signature
```

### 2.2 èªå¯ã‚¹ã‚³ãƒ¼ãƒ—

```
ç®¡ç†ã‚¹ã‚³ãƒ¼ãƒ—:
- admin:read - å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š
- admin:write - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿ãƒ»å‰Šé™¤
- admin:delete - å¼·åˆ¶å‰Šé™¤

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ—:
- user:read - è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š
- user:write - è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿
- user:delete - è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿å‰Šé™¤

å…¬é–‹ã‚¹ã‚³ãƒ¼ãƒ—:
| **æœ¬ç•ªç’°å¢ƒ** | æœªå®Ÿè£… | å°†æ¥çš„ã« Vercel ç­‰ã§äºˆå®š |

### 1.3 API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ | å®Ÿè£…çŠ¶æ³ |
|---------------|----------|------|----------|
| `/api/materials` | GET | è³‡æ–™ä¸€è¦§å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/materials/:id` | GET | è³‡æ–™è©³ç´°å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/materials/:id` | DELETE | è³‡æ–™å‰Šé™¤ | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/upload` | POST | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/comments` | GET | ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/comments` | POST | ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/ratings` | GET | è©•ä¾¡å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/ratings` | POST | è©•ä¾¡æŠ•ç¨¿ | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/users` | GET | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/users/:id` | GET | ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°å–å¾— | âœ… å®Ÿè£…æ¸ˆã¿ |
| `/api/ocr` | POST | OCRå‡¦ç†å®Ÿè¡Œ | âœ… å®Ÿè£…æ¸ˆã¿ |

## 2. èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 2.1 èªè¨¼æ–¹å¼

**ç¾åœ¨ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰**:
- èªè¨¼ãªã—ï¼ˆå…±é€šãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰'123'ã«ã‚ˆã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åˆ¶å¾¡ã®ã¿ï¼‰

**å°†æ¥äºˆå®š**:
- JWT ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼
- Firebase Authentication
- ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### 2.2 æ¨©é™ç®¡ç†

**ç¾åœ¨**:
- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¨æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

**å°†æ¥äºˆå®š**:
```
æ¨©é™ãƒ¬ãƒ™ãƒ«:
- student: è³‡æ–™ã®é–²è¦§ãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ
- teacher: è³‡æ–™ã®ç®¡ç†ãƒ»å‰Šé™¤
- admin: å…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
```

### 2.3 CORS ãƒãƒªã‚·ãƒ¼

```
è¨±å¯ã‚ªãƒªã‚¸ãƒ³: 
  - http://localhost:5173 (é–‹ç™ºç’°å¢ƒ)
  - https://hirorogo.github.io (æœ¬ç•ªç’°å¢ƒ)
è¨±å¯ãƒ¡ã‚½ãƒƒãƒ‰: GET, POST, PUT, DELETE, OPTIONS
è¨±å¯ãƒ˜ãƒƒãƒ€: Content-Type, Authorization
è¨±å¯èªè¨¼æƒ…å ±: yes
```

## 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 3.1 ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

```json
{
  "error": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "success": false,
  "timestamp": "2025-11-09T12:00:00Z"
}
```

ã¾ãŸã¯

```json
{
  "message": "æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "success": true,
  "data": {...}
}
```

### 3.2 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€è¦§

| ã‚³ãƒ¼ãƒ‰ | æ„å‘³ | èª¬æ˜ |
|-------|------|------|
| **200** | OK | ãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸ |
| **201** | Created | ãƒªã‚½ãƒ¼ã‚¹ä½œæˆæˆåŠŸ |
| **400** | Bad Request | å¿…é ˆé …ç›®ä¸è¶³ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚¨ãƒ©ãƒ¼ |
| **403** | Forbidden | ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ä¸æ­£ |
| **404** | Not Found | ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„ |
| **413** | Payload Too Large | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¶…éï¼ˆ50MBåˆ¶é™ï¼‰ |
| **500** | Internal Server Error | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ |

### 3.3 ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§

```
ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
- "ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“"
- "å¿…é ˆé …ç›®ãŒä¸è¶³ã—ã¦ã„ã¾ã™"  
- "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™"
- "ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒåˆ¶é™ã‚’è¶…ãˆã¦ã„ã¾ã™"
- "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼"
```

## 4. API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè©³ç´°

### 4.1 Materialsï¼ˆè³‡æ–™ç®¡ç†ï¼‰

#### 4.1.1 GET /api/materials - è³‡æ–™ä¸€è¦§å–å¾—

**èª¬æ˜**: ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å…¨è³‡æ–™ã®ä¸€è¦§ã‚’å–å¾—

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/materials
Content-Type: application/json
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
[
  {
    "id": 1762614298402,
    "title": "æ•°å­¦å•é¡Œé›†",
    "subject": "æ•°å­¦", 
    "description": "é«˜æ ¡1å¹´ç”Ÿå‘ã‘æ•°å­¦å•é¡Œ",
    "uploader": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "fileName": "math-problem.png",
    "filePath": "/uploads/1762614298402-math-problem.png",
    "fileSize": 245760,
    "fileType": "image/png",
    "uploadDate": "2025-11-09T03:18:18.402Z",
    "viewCount": 0,
    "downloadCount": 0,
    "rating": 0,
    "tags": ["æ•°å­¦"]
  }
]
```

#### 4.1.2 GET /api/materials/:id - è³‡æ–™è©³ç´°å–å¾—

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸIDã®è³‡æ–™è©³ç´°ã‚’å–å¾—

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/materials/1762614298402
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "id": 1762614298402,
  "title": "æ•°å­¦å•é¡Œé›†",
  "subject": "æ•°å­¦",
  "description": "é«˜æ ¡1å¹´ç”Ÿå‘ã‘æ•°å­¦å•é¡Œ",
  "uploader": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
  "fileName": "math-problem.png", 
  "filePath": "/uploads/1762614298402-math-problem.png",
  "fileSize": 245760,
  "fileType": "image/png",
  "uploadDate": "2025-11-09T03:18:18.402Z",
  "viewCount": 1,
  "downloadCount": 0,
  "rating": 0,
  "tags": ["æ•°å­¦"]
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "message": "è³‡æ–™ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
}
```

#### 4.1.3 DELETE /api/materials/:id - è³‡æ–™å‰Šé™¤

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸIDã®è³‡æ–™ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
DELETE /api/materials/1762614298402
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "message": "å‰Šé™¤ã—ã¾ã—ãŸ"
}
```

### 4.2 Uploadï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰

#### 4.2.1 POST /api/upload - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**èª¬æ˜**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€è³‡æ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/upload
Content-Type: multipart/form-data

ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿:
- file: (ãƒ•ã‚¡ã‚¤ãƒ«) ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- title: (string) è³‡æ–™ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¿…é ˆï¼‰
- subject: (string) ç§‘ç›®åï¼ˆå¿…é ˆï¼‰
- description: (string) èª¬æ˜æ–‡ï¼ˆä»»æ„ï¼‰
- uploader: (string) ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…åï¼ˆå¿…é ˆï¼‰
```

**å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**:
- PDF: `application/pdf`
- ç”»åƒ: `image/jpeg`, `image/jpg`, `image/png`
- ãƒ†ã‚­ã‚¹ãƒˆ: `text/plain`

**ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: 50MB

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "message": "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ",
  "material": {
    "id": 1762614298402,
    "title": "æ•°å­¦å•é¡Œé›†",
    "subject": "æ•°å­¦",
    "description": "é«˜æ ¡1å¹´ç”Ÿå‘ã‘æ•°å­¦å•é¡Œ",
    "uploader": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "fileName": "math-problem.png",
    "filePath": "/uploads/1762614298402-math-problem.png",
    "fileSize": 245760,
    "fileType": "image/png", 
    "uploadDate": "2025-11-09T03:18:18.402Z",
    "viewCount": 0,
    "downloadCount": 0,
    "rating": 0,
    "tags": ["æ•°å­¦"]
  }
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "error": "ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“"
}
```

```json
{
  "error": "å¿…é ˆé …ç›®ãŒä¸è¶³ã—ã¦ã„ã¾ã™"
}
```

```json
{
  "error": "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™"
}
```

### 4.3 Commentsï¼ˆã‚³ãƒ¡ãƒ³ãƒˆç®¡ç†ï¼‰

#### 4.3.1 GET /api/comments - ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§å–å¾—

**èª¬æ˜**: ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- materialId: (number) è³‡æ–™IDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/comments?materialId=1762614298402
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
[
  {
    "id": 1,
    "materialId": 1762614298402,
    "author": "ã‚³ãƒ¡ãƒ³ãƒˆè€…",
    "text": "ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸ",
    "rating": 5,
    "createdAt": "2025-11-09T03:20:00.000Z"
  }
]
```

#### 4.3.2 POST /api/comments - ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿

**èª¬æ˜**: æ–°ã—ã„ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/comments
Content-Type: application/json

{
  "materialId": 1762614298402,
  "author": "ã‚³ãƒ¡ãƒ³ãƒˆè€…",
  "text": "ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸ",
  "rating": 5
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "comment": {
    "id": 2,
    "materialId": 1762614298402,
    "author": "ã‚³ãƒ¡ãƒ³ãƒˆè€…",
    "text": "ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸ", 
    "rating": 5,
    "createdAt": "2025-11-09T03:25:00.000Z"
  }
}
```

### 4.4 Ratingsï¼ˆè©•ä¾¡ç®¡ç†ï¼‰

#### 4.4.1 GET /api/ratings/stats/:materialId - è©•ä¾¡çµ±è¨ˆå–å¾—

**èª¬æ˜**: æŒ‡å®šè³‡æ–™ã®è©•ä¾¡çµ±è¨ˆã‚’å–å¾—

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/ratings/stats/1762614298402
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "materialId": 1762614298402,
  "averageRating": 4.2,
  "totalRatings": 5,
  "distribution": {
    "1": 0,
    "2": 1,
    "3": 0,
    "4": 2,
    "5": 2
  }
}
```

#### 4.4.2 POST /api/ratings - è©•ä¾¡æŠ•ç¨¿

**èª¬æ˜**: è³‡æ–™ã«è©•ä¾¡ã‚’æŠ•ç¨¿

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/ratings
Content-Type: application/json

{
  "materialId": 1762614298402,
  "rating": 5,
  "userId": "user123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "rating": {
    "id": 3,
    "materialId": 1762614298402,
    "rating": 5,
    "userId": "user123",
    "createdAt": "2025-11-09T03:30:00.000Z"
  }
}
```

### 4.5 Usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼‰

#### 4.5.1 GET /api/users - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—

**èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/users
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
[
  {
    "id": "user1",
    "nickname": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "email": "test@example.com",
    "createdAt": "2025-11-09T00:00:00.000Z"
  }
]
```

#### 4.5.2 GET /api/users/:id - ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°å–å¾—

**èª¬æ˜**: æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°ã‚’å–å¾—

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/users/user1
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "id": "user1",
  "nickname": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
  "email": "test@example.com",
  "bio": "é«˜æ ¡ç”Ÿã§ã™",
  "uploadedMaterials": 5,
  "createdAt": "2025-11-09T00:00:00.000Z"
}
```

### 4.6 OCRï¼ˆæ–‡å­—èªè­˜ï¼‰

#### 4.6.1 POST /api/ocr - OCRå‡¦ç†å®Ÿè¡Œ

**èª¬æ˜**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/ocr
Content-Type: application/json

{
  "imageUrl": "/uploads/1762614298402-math-problem.png",
  "language": "jpn"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "text": "å•é¡Œ1: æ¬¡ã®æ–¹ç¨‹å¼ã‚’è§£ããªã•ã„\n2x + 5 = 11",
  "confidence": 95.2
}
```

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 5.1 Materialï¼ˆè³‡æ–™ï¼‰

```json
{
  "id": "number",              // ãƒ¦ãƒ‹ãƒ¼ã‚¯IDï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰
  "title": "string",           // è³‡æ–™ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¿…é ˆï¼‰
  "subject": "string",         // ç§‘ç›®åï¼ˆå¿…é ˆï¼‰
  "description": "string",     // èª¬æ˜æ–‡ï¼ˆä»»æ„ï¼‰
  "uploader": "string",        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…ï¼ˆå¿…é ˆï¼‰
  "fileName": "string",        // å…ƒãƒ•ã‚¡ã‚¤ãƒ«å
  "filePath": "string",        // ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  "fileSize": "number",        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆï¼‰
  "fileType": "string",        // MIMEã‚¿ã‚¤ãƒ—
  "uploadDate": "string",      // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚ï¼ˆISO 8601ï¼‰
  "viewCount": "number",       // é–²è¦§æ•°
  "downloadCount": "number",   // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°
  "rating": "number",          // å¹³å‡è©•ä¾¡ï¼ˆ0-5ï¼‰
  "tags": "string[]"           // ã‚¿ã‚°é…åˆ—
}
```

### 5.2 Commentï¼ˆã‚³ãƒ¡ãƒ³ãƒˆï¼‰

```json
{
  "id": "number",              // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
  "materialId": "number",      // å¯¾è±¡è³‡æ–™ID
  "author": "string",          // ã‚³ãƒ¡ãƒ³ãƒˆè€…å
  "text": "string",            // ã‚³ãƒ¡ãƒ³ãƒˆæœ¬æ–‡
  "rating": "number",          // è©•ä¾¡ï¼ˆ1-5ï¼‰
  "createdAt": "string",       // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  "updatedAt": "string"        // æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### 5.3 Ratingï¼ˆè©•ä¾¡ï¼‰

```json
{
  "id": "number",              // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
  "materialId": "number",      // å¯¾è±¡è³‡æ–™ID
  "userId": "string",          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  "rating": "number",          // è©•ä¾¡ï¼ˆ1-5ï¼‰
  "createdAt": "string"        // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### 5.4 Userï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

```json
{
  "id": "string",              // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
  "nickname": "string",        // ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ 
  "email": "string",           // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰
  "bio": "string",             // è‡ªå·±ç´¹ä»‹ï¼ˆä»»æ„ï¼‰
  "uploadedMaterials": "number", // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è³‡æ–™æ•°
  "createdAt": "string",       // ç™»éŒ²æ—¥æ™‚ï¼ˆISO 8601ï¼‰
  "lastLoginAt": "string"      // æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

## 6. å®Ÿè£…çŠ¶æ³

### 6.1 å®Œæˆæ¸ˆã¿æ©Ÿèƒ½
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒãƒ«ãƒãƒ‘ãƒ¼ãƒˆå¯¾å¿œï¼‰
- âœ… è³‡æ–™CRUDæ“ä½œï¼ˆä½œæˆãƒ»èª­å–ãƒ»å‰Šé™¤ï¼‰
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãƒ»ã‚µã‚¤ã‚ºåˆ¶é™
- âœ… JSONãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- âœ… CORSè¨­å®š
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 6.2 åŸºæœ¬å®Ÿè£…æ¸ˆã¿ï¼ˆæ©Ÿèƒ½æ‹¡å¼µãŒå¿…è¦ï¼‰
- ğŸ”¶ ã‚³ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆåŸºæœ¬CRUDï¼‰
- ğŸ”¶ è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆåŸºæœ¬CRUDï¼‰ 
- ğŸ”¶ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆåŸºæœ¬CRUDï¼‰
- ğŸ”¶ OCRã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆã‚¹ã‚¿ãƒ–å®Ÿè£…ï¼‰

### 6.3 æœªå®Ÿè£…æ©Ÿèƒ½
- âŒ JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- âŒ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰åˆ¶å¾¡
- âŒ ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- âŒ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- âŒ é«˜åº¦ãªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- âŒ å®Ÿéš›ã®OCRå‡¦ç†ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ï¼‰

## 7. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 7.1 ç¾åœ¨å®Ÿè£…æ¸ˆã¿
- ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆmulterï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ50MBï¼‰
- CORSè¨­å®š
- ãƒ‘ã‚¹ ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–ï¼ˆè‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆï¼‰

### 7.2 ä»Šå¾Œå®Ÿè£…äºˆå®š
- JWTèªè¨¼ãƒ»èªå¯
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¦ã‚¤ãƒ«ã‚¹ã‚¹ã‚­ãƒ£ãƒ³
- å…¥åŠ›å€¤ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå¼·åŒ–
- HTTPSå¼·åˆ¶

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´11æœˆ9æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å®Ÿè£…è€…**: hiro
        "fileUrl": "https://storage.googleapis.com/.../test1.pdf",
        "uploadedBy": "Mr.Yamada",
        "rating": 4.5,
        "ratingCount": 12,
        "views": 234,
        "downloads": 45,
        "createdAt": "2024-01-15T10:30:00Z"
      }
    ],
    "pagination": {
      "totalCount": 45,
      "page": 1,
      "limit": 10,
      "totalPages": 5,
      "hasNextPage": true,
      "hasPrevPage": false
    }
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 400: ä¸æ­£ãªã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- 500: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
```

#### 4.1.2 GET /materials/:id - è³‡æ–™è©³ç´°å–å¾—

```
GET /materials/1

èª¬æ˜: æŒ‡å®šã•ã‚ŒãŸ ID ã®è³‡æ–™è©³ç´°æƒ…å ±ã‚’å–å¾—

ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åå‰  â”‚ å‹      â”‚ èª¬æ˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id    â”‚ number  â”‚ è³‡æ–™ ID         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": 1,
    "title": "2024å¹´åº¦ æ•°å­¦ ä¸­é–“ãƒ†ã‚¹ãƒˆ",
    "subject": "æ•°å­¦",
    "description": "é«˜æ ¡ 1 å¹´ã®ä¸­é–“ãƒ†ã‚¹ãƒˆäºˆæƒ³å•é¡Œ\nç¯„å›²: ä¸‰è§’é–¢æ•°ï½å¾®åˆ†æ³•",
    "tags": ["ä¸­é–“", "äºˆæƒ³å•é¡Œ", "è§£ç­”ä»˜ã"],
    "fileUrl": "https://storage.googleapis.com/.../test1.pdf",
    "fileName": "math_test_2024.pdf",
    "fileSize": 2097152,
    "uploadedBy": "Mr.Yamada",
    "uploadedById": "user-abc123",
    "rating": 4.5,
    "ratingCount": 12,
    "views": 234,
    "downloads": 45,
    "isPublished": true,
    "createdAt": "2024-01-15T10:30:00Z",
    "updatedAt": "2024-01-20T14:00:00Z",
    "comments": [
      {
        "id": 1,
        "author": "å­¦ç”ŸA",
        "text": "éå¸¸ã«å½¹ç«‹ã¡ã¾ã—ãŸï¼",
        "rating": 5,
        "createdAt": "2024-01-15T12:00:00Z"
      }
    ],
    "userRating": 4  // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©•ä¾¡ï¼ˆãªã„å ´åˆã¯ nullï¼‰
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 404: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- 500: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
```

#### 4.1.3 POST /materials - è³‡æ–™ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```
POST /materials
Content-Type: multipart/form-data
Authorization: Bearer <idToken>

èª¬æ˜: æ–°ã—ã„è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰   â”‚ å‹      â”‚ å¿…é ˆ     â”‚ èª¬æ˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ title        â”‚ string  â”‚ âœ“        â”‚ è³‡æ–™ã‚¿ã‚¤ãƒˆãƒ«           â”‚
â”‚ subject      â”‚ string  â”‚ âœ“        â”‚ ç§‘ç›®å                 â”‚
â”‚ description  â”‚ string  â”‚          â”‚ èª¬æ˜ï¼ˆæœ€å¤§ 500 å­—ï¼‰    â”‚
â”‚ tags         â”‚ string[]â”‚          â”‚ ã‚¿ã‚°é…åˆ—               â”‚
â”‚ file         â”‚ file    â”‚ âœ“        â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆPDF/ç”»åƒï¼‰   â”‚
â”‚ nickname     â”‚ string  â”‚ âœ“        â”‚ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…ã®åå‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«:
- title: 1ï½100 æ–‡å­—
- subject: SUBJECTS ã«å­˜åœ¨ã™ã‚‹ç§‘ç›®
- description: æœ€å¤§ 500 æ–‡å­—
- file: .pdf/.jpg/.png/.gifã€æœ€å¤§ 10MB
- tags: æœ€å¤§ 10 å€‹ã€1 å€‹ã‚ãŸã‚Šæœ€å¤§ 20 æ–‡å­—
- nickname: 1ï½30 æ–‡å­—

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼ˆæˆåŠŸæ™‚ï¼‰:
{
  "status": "success",
  "data": {
    "id": 46,
    "title": "2024å¹´åº¦ æ•°å­¦ ä¸­é–“ãƒ†ã‚¹ãƒˆ",
    "subject": "æ•°å­¦",
    "description": "é«˜æ ¡ 1 å¹´ã®ä¸­é–“ãƒ†ã‚¹ãƒˆäºˆæƒ³å•é¡Œ",
    "fileUrl": "https://storage.googleapis.com/.../test46.pdf",
    "uploadedBy": "Mr.Yamada",
    "createdAt": "2024-01-21T10:00:00Z"
  },
  "message": "è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ"
}

ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "error",
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å…¥åŠ›å€¤ãŒä¸æ­£ã§ã™",
    "details": {
      "errors": [
        {
          "field": "title",
          "message": "ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™"
        },
        {
          "field": "file",
          "message": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯ 10MB ä»¥ä¸‹ã«ã—ã¦ãã ã•ã„"
        }
      ]
    }
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 201: Createdï¼ˆæˆåŠŸï¼‰
- 400: Bad Requestï¼ˆæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ï¼‰
- 401: Unauthorizedï¼ˆèªè¨¼å¤±æ•—ï¼‰
- 413: Payload Too Largeï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã™ãã‚‹ï¼‰
- 500: Internal Server Error
```

#### 4.1.4 PUT /materials/:id - è³‡æ–™æ›´æ–°

```
PUT /materials/1
Content-Type: application/json
Authorization: Bearer <idToken>

èª¬æ˜: æ—¢å­˜è³‡æ–™ã‚’æ›´æ–°ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…ã®ã¿å¯èƒ½ï¼‰

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:
{
  "title": "2024å¹´åº¦ æ•°å­¦ æœŸæœ«ãƒ†ã‚¹ãƒˆ",
  "description": "æœŸæœ«è©¦é¨“å¯¾ç­–å•é¡Œ",
  "tags": ["æœŸæœ«", "å¯¾ç­–", "è§£ç­”ä»˜ã"]
}

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": 1,
    "title": "2024å¹´åº¦ æ•°å­¦ æœŸæœ«ãƒ†ã‚¹ãƒˆ",
    "description": "æœŸæœ«è©¦é¨“å¯¾ç­–å•é¡Œ",
    "tags": ["æœŸæœ«", "å¯¾ç­–", "è§£ç­”ä»˜ã"],
    "updatedAt": "2024-01-21T15:00:00Z"
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 400: Bad Request
- 401: Unauthorized
- 403: Forbiddenï¼ˆæ¨©é™ãªã—ï¼‰
- 404: Not Found
- 500: Internal Server Error
```

#### 4.1.5 DELETE /materials/:id - è³‡æ–™å‰Šé™¤

```
DELETE /materials/1
Authorization: Bearer <idToken>

èª¬æ˜: è³‡æ–™ã‚’å‰Šé™¤ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…ã¾ãŸã¯ã‚¢ãƒ‰ãƒŸãƒ³ã®ã¿å¯èƒ½ï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "message": "è³‡æ–™ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 204: No Contentï¼ˆæˆåŠŸï¼‰
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found
- 500: Internal Server Error
```

### 4.2 Commentsï¼ˆã‚³ãƒ¡ãƒ³ãƒˆï¼‰

#### 4.2.1 GET /materials/:materialId/comments - ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§

```
GET /materials/1/comments?page=1&limit=20

èª¬æ˜: ç‰¹å®šè³‡æ–™ã®ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—

ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
â”œâ”€â”€ materialId: å¯¾è±¡è³‡æ–™ ID

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
â”œâ”€â”€ page: ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
â”œâ”€â”€ limit: 1 ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ï¼‰
â””â”€â”€ sortBy: ä¸¦ã³é †ï¼ˆnewest/oldest/ratingï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "comments": [
      {
        "id": 1,
        "materialId": 1,
        "author": "å­¦ç”ŸA",
        "authorId": "user-student-001",
        "text": "ã¨ã¦ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„èª¬æ˜ã§ã€åŠ©ã‹ã‚Šã¾ã—ãŸï¼",
        "rating": 5,
        "createdAt": "2024-01-15T12:00:00Z"
      },
      {
        "id": 2,
        "materialId": 1,
        "author": "å­¦ç”ŸB",
        "authorId": "user-student-002",
        "text": "è§£ç­”ãŒã‚‚ã†å°‘ã—è©³ã—ã„ã¨å¬‰ã—ã„",
        "rating": 4,
        "createdAt": "2024-01-16T08:30:00Z"
      }
    ],
    "pagination": {
      "totalCount": 12,
      "page": 1,
      "limit": 20,
      "totalPages": 1
    }
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 404: è³‡æ–™ãŒè¦‹ã¤ã‹ã‚‰ãªã„
```

#### 4.2.2 POST /materials/:materialId/comments - ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿

```
POST /materials/1/comments
Content-Type: application/json
Authorization: Bearer <idToken>

èª¬æ˜: è³‡æ–™ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:
{
  "text": "ã¨ã¦ã‚‚å½¹ã«ç«‹ã¡ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼",
  "rating": 5
}

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:
- text: 1ï½300 æ–‡å­—ï¼ˆå¿…é ˆï¼‰
- rating: 0ï½5 ã®æ•´æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": 13,
    "materialId": 1,
    "author": "Mr.Smith",
    "text": "ã¨ã¦ã‚‚å½¹ã«ç«‹ã¡ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼",
    "rating": 5,
    "createdAt": "2024-01-21T16:00:00Z"
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 201: Created
- 400: Bad Request
- 401: Unauthorized
- 404: Not Found
```

#### 4.2.3 DELETE /comments/:commentId - ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤

```
DELETE /comments/1
Authorization: Bearer <idToken>

èª¬æ˜: ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ï¼ˆæŠ•ç¨¿è€…ã¾ãŸã¯ã‚¢ãƒ‰ãƒŸãƒ³ã®ã¿ï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "message": "ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ"
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 204: No Content
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found
```

### 4.3 Ratingsï¼ˆè©•ä¾¡ï¼‰

#### 4.3.1 POST /materials/:materialId/ratings - è©•ä¾¡æŠ•ç¨¿

```
POST /materials/1/ratings
Content-Type: application/json
Authorization: Bearer <idToken>

èª¬æ˜: è³‡æ–™ã«è©•ä¾¡ã‚’æŠ•ç¨¿ï¼ˆ1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Š 1 ã¤ï¼‰

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:
{
  "rating": 4
}

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:
- rating: 1ï½5 ã®æ•´æ•°ï¼ˆå¿…é ˆï¼‰

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": 1,
    "materialId": 1,
    "userId": "user-abc123",
    "rating": 4,
    "createdAt": "2024-01-21T16:00:00Z"
  },
  "material": {
    "id": 1,
    "rating": 4.3,  // æ›´æ–°ã•ã‚ŒãŸå¹³å‡è©•ä¾¡
    "ratingCount": 23
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 201: Createdï¼ˆæ–°è¦ä½œæˆï¼‰
- 200: OKï¼ˆæ—¢å­˜è©•ä¾¡ã‚’æ›´æ–°ï¼‰
- 400: Bad Request
- 401: Unauthorized
- 404: Not Found
```

#### 4.3.2 DELETE /materials/:materialId/ratings - è©•ä¾¡å‰Šé™¤

```
DELETE /materials/1/ratings
Authorization: Bearer <idToken>

èª¬æ˜: è‡ªåˆ†ã®è©•ä¾¡ã‚’å‰Šé™¤

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "message": "è©•ä¾¡ã‚’å‰Šé™¤ã—ã¾ã—ãŸ",
  "material": {
    "id": 1,
    "rating": 4.2,  // æ›´æ–°ã•ã‚ŒãŸå¹³å‡è©•ä¾¡
    "ratingCount": 22
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 401: Unauthorized
- 404: Not Found
```

### 4.4 Usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

#### 4.4.1 GET /users/:userId - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

```
GET /users/user-abc123

èª¬æ˜: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—

ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
â”œâ”€â”€ userId: ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": "user-abc123",
    "nickname": "Mr.Yamada",
    "email": "yamada@example.com",
    "bio": "é«˜æ ¡æ•°å­¦æ•™å¸«ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚",
    "profileImage": "https://storage.googleapis.com/.../profile.jpg",
    "uploadedMaterialCount": 15,
    "uploadedMaterials": [1, 2, 3, ...],
    "totalDownloads": 234,
    "role": "teacher",
    "createdAt": "2023-09-01T10:00:00Z",
    "lastLoginAt": "2024-01-21T14:30:00Z"
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 404: Not Found
```

#### 4.4.2 PUT /users/:userId - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–°

```
PUT /users/user-abc123
Content-Type: application/json
Authorization: Bearer <idToken>

èª¬æ˜: è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:
{
  "nickname": "Mr.Yamada",
  "bio": "é«˜æ ¡æ•°å­¦æ•™å¸«ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚"
}

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:
- nickname: 1ï½30 æ–‡å­—ï¼ˆä¸€æ„æ€§ãƒã‚§ãƒƒã‚¯ï¼‰
- bio: æœ€å¤§ 200 æ–‡å­—

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:
{
  "status": "success",
  "data": {
    "id": "user-abc123",
    "nickname": "Mr.Yamada",
    "bio": "é«˜æ ¡æ•°å­¦æ•™å¸«ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚",
    "updatedAt": "2024-01-21T16:00:00Z"
  }
}

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:
- 200: OK
- 400: Bad Request
- 401: Unauthorized
- 409: Conflictï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ é‡è¤‡ï¼‰
```

## 5. Rate Limitingï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼‰

### 5.1 åˆ¶é™è¨­å®š

```
ç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼:
â”œâ”€â”€ èª­ã¿å–ã‚Š: 100 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
â”œâ”€â”€ æ›¸ãè¾¼ã¿: 10 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
â””â”€â”€ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: 5 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥

ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆå°†æ¥å®Ÿè£…ï¼‰:
â”œâ”€â”€ èª­ã¿å–ã‚Š: 1000 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
â”œâ”€â”€ æ›¸ãè¾¼ã¿: 100 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
â””â”€â”€ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: 50 ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥
```

### 5.2 ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ˜ãƒƒãƒ€

```
ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€:
X-RateLimit-Limit: 100        // åˆ¶é™æ•°
X-RateLimit-Remaining: 95     // æ®‹ã‚Šæ•°
X-RateLimit-Reset: 1705865200 // ãƒªã‚»ãƒƒãƒˆæ™‚åˆ»ï¼ˆUnix ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰

åˆ¶é™è¶…éæ™‚ï¼ˆ429 Too Many Requestsï¼‰:
{
  "status": "error",
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤šã™ãã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰ãŠè©¦ã—ãã ã•ã„ã€‚",
    "retryAfter": 60  // ç§’å˜ä½
  }
}
```

## 6. ãƒšã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

### 6.1 ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ–¹å¼

```
Offset-based ãƒšãƒ¼ã‚¸ãƒ³ã‚°ï¼ˆç¾åœ¨ï¼‰:

GET /materials?page=2&limit=10

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  "pagination": {
    "page": 2,
    "limit": 10,
    "totalCount": 45,
    "totalPages": 5,
    "offset": 10,
    "hasNextPage": true,
    "hasPrevPage": true
  }
}

å°†æ¥ã® Cursor-based ãƒšãƒ¼ã‚¸ãƒ³ã‚°:

GET /materials?limit=10&cursor=abc123xyz

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  "pagination": {
    "nextCursor": "xyz789abc",
    "prevCursor": "123abc789",
    "hasMore": true
  }
}
```

## 7. ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»•æ§˜

### 7.1 ã‚½ãƒ¼ãƒˆå¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```
Materials:
- createdAt (newest/oldest) - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
- rating (é«˜è©•ä¾¡é †)
- views (é–²è¦§æ•°é †)
- downloads (ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°é †)
- title (ã‚¿ã‚¤ãƒˆãƒ«é †)

Comments:
- createdAt (newest/oldest) - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
- rating (é«˜è©•ä¾¡é †)

Users:
- createdAt (newest/oldest)
- uploadedCount (ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ•°é †)
```

### 7.2 ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```
Materials:
- subject: å˜ä¸€é¸æŠ
- tags: è¤‡æ•°é¸æŠï¼ˆOR æ¡ä»¶ï¼‰
- rating: ç¯„å›²æŒ‡å®šï¼ˆminRatingï½maxRatingï¼‰
- uploadedBy: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
- isPublished: boolean

Users:
- role: student/teacher/admin
- createdAt: æ—¥ä»˜ç¯„å›²æŒ‡å®š
```

## 8. Webhookï¼ˆå°†æ¥å®Ÿè£…ï¼‰

### 8.1 ã‚¤ãƒ™ãƒ³ãƒˆé€šçŸ¥

```
Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç™»éŒ²:
POST /webhooks
{
  "url": "https://myapp.example.com/webhook",
  "events": ["material.created", "comment.added", "rating.updated"],
  "secret": "webhook_secret_key"
}

ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—:
- material.created: è³‡æ–™ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸ
- material.updated: è³‡æ–™ãŒæ›´æ–°ã•ã‚ŒãŸ
- material.deleted: è³‡æ–™ãŒå‰Šé™¤ã•ã‚ŒãŸ
- comment.added: ã‚³ãƒ¡ãƒ³ãƒˆãŒè¿½åŠ ã•ã‚ŒãŸ
- comment.deleted: ã‚³ãƒ¡ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚ŒãŸ
- rating.submitted: è©•ä¾¡ãŒæŠ•ç¨¿ã•ã‚ŒãŸ

Webhook ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰:
{
  "event": "material.created",
  "timestamp": "2024-01-21T16:00:00Z",
  "data": {
    "id": 46,
    "title": "2024å¹´åº¦ æ•°å­¦ ä¸­é–“ãƒ†ã‚¹ãƒˆ",
    "uploadedBy": "Mr.Yamada"
  }
}
```

## 9. ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ãƒ»å¾Œæ–¹äº’æ›æ€§

### 9.1 API ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°æˆ¦ç•¥

```
URL ãƒ™ãƒ¼ã‚¹:
v1: https://.../api/v1/materials
v2: https://.../api/v2/materials

Accept ãƒ˜ãƒƒãƒ€ãƒ™ãƒ¼ã‚¹:
Accept: application/vnd.example.com; version=1

æ—¥ä»˜ãƒ™ãƒ¼ã‚¹ï¼ˆæ¨å¥¨ã—ãªã„ï¼‰:
X-API-Version: 2024-01-01
```

### 9.2 éæ¨å¥¨ API ã®é€šçŸ¥

```
éæ¨å¥¨æ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€:
Deprecation: true
Sunset: Sun, 31 Dec 2024 23:59:59 GMT
Link: <https://.../api/v2/...>; rel="successor-version"

éæ¨å¥¨ API ã‹ã‚‰ã®è­¦å‘Šãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  "status": "success",
  "data": { ... },
  "warnings": [
    {
      "type": "DEPRECATION",
      "message": "ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ 2024 å¹´æœ«ã§å»ƒæ­¢äºˆå®šã§ã™ã€‚v2 ã¸ã®ç§»è¡Œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚",
      "deprecatedAt": "2024-01-01",
      "sunsetsAt": "2024-12-31"
    }
  ]
}
```

## 10. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚°

### 10.1 ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

```
ã™ã¹ã¦ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ä»¥ä¸‹ã‚’å«ã‚ã‚‹:

{
  "status": "success" | "error",
  "data": { ... },
  "meta": {
    "requestId": "req-abc123xyz",
    "timestamp": "2024-01-21T16:00:00Z",
    "version": "v1",
    "responseTime": 123  // ãƒŸãƒªç§’
  }
}
```

### 10.2 ç›£æŸ»ãƒ­ã‚°

```
é‡è¦ãªæ“ä½œã®ç›£æŸ»ãƒ­ã‚°ã‚’è¨˜éŒ²:

- è³‡æ–™ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: CREATE_MATERIAL
- è³‡æ–™å‰Šé™¤: DELETE_MATERIAL
- ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿: CREATE_COMMENT
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å¤‰æ›´: UPDATE_USER

ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:
{
  "timestamp": "2024-01-21T16:00:00Z",
  "userId": "user-abc123",
  "action": "CREATE_MATERIAL",
  "resourceType": "Material",
  "resourceId": "46",
  "status": "SUCCESS",
  "details": {
    "title": "2024å¹´åº¦ æ•°å­¦ ä¸­é–“ãƒ†ã‚¹ãƒˆ"
  },
  "ipAddress": "192.168.1.1"
}
```

## 11. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 11.1 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…æ¨å¥¨

```javascript
// API å‘¼ã³å‡ºã—ä¾‹ï¼ˆJavaScriptï¼‰
async function getMaterials(filters) {
  const params = new URLSearchParams(filters);
  try {
    const response = await fetch(
      `https://.../api/materials?${params}`,
      {
        headers: {
          'Authorization': `Bearer ${idToken}`,
          'Content-Type': 'application/json'
        }
      }
    );
    
    if (!response.ok) {
      throw new Error(`API Error: ${response.status}`);
    }
    
    return await response.json();
  } catch (error) {
    console.error('Failed to fetch materials:', error);
    throw error;
  }
}

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try {
  const data = await getMaterials({ subject: 'æ•°å­¦' });
} catch (error) {
  if (error.status === 401) {
    // èªè¨¼å¤±æ•— â†’ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸
  } else if (error.status === 429) {
    // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ â†’ ãƒªãƒˆãƒ©ã‚¤å¾…æ©Ÿ
  } else {
    // ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼
  }
}
```

### 11.2 ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥

```
Cache-Control ãƒ˜ãƒƒãƒ€è¨­å®š:

GET /materials/:id (è©³ç´°æƒ…å ±)
Cache-Control: public, max-age=3600  // 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥

GET /materials (ä¸€è¦§)
Cache-Control: public, max-age=300   // 5åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥

POST /materials (æ›¸ãè¾¼ã¿)
Cache-Control: no-cache, no-store    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—

ETags ã®æ´»ç”¨:
- ETag: "abc123xyz"
- If-None-Match: "abc123xyz"
- 304 Not Modified: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ
```

## 12. ãƒ†ã‚¹ãƒˆç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆé–‹ç™ºç’°å¢ƒï¼‰

```
é–‹ç™ºç’°å¢ƒã§ã®å‹•ä½œç¢ºèª:

GET /health
â”œâ”€â”€ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ã‚µãƒ¼ãƒ“ã‚¹ã®å¥å…¨æ€§ç¢ºèª
â””â”€â”€ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: { "status": "ok" }

GET /test-data
â”œâ”€â”€ èª¬æ˜: ãƒ†ã‚¹ãƒˆç”¨åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
â””â”€â”€ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: INITIAL_MATERIALS[]

POST /test-reset
â”œâ”€â”€ èª¬æ˜: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
â””â”€â”€ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: { "status": "reset" }
```

---

æœ¬ API ä»•æ§˜æ›¸ã¯ã€Firebase Cloud Functions ã¨ Firestore ã‚’åŸºç›¤ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿè£…æ™‚ã«è©³ç´°èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚

